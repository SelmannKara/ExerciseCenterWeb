@model List<ExerciseCenter_UI.Dtos.AppointmentsDtos.ResultAppointmentsDto>

@{
    Layout = null;
    var disabledDates = Model != null
        ? Model.Where(m => m.Status).Select(m => m.AppointmentDate.ToString("yyyy-MM-dd")).ToArray()
        : new string[] { };
}

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Randevu Al</title>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.3/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://code.jquery.com/ui/1.13.3/jquery-ui.js"></script>
    <link rel="stylesheet" href="~/ExerciseCenter/appointment/styles.css">
    <script>
        $(function () {
            // Disable specific dates
            var disabledDates = @Html.Raw(Json.Serialize(disabledDates));

            $("#datepicker").datepicker({
                dateFormat: "yy-mm-dd",
                beforeShowDay: function (date) {
                    var string = jQuery.datepicker.formatDate('yy-mm-dd', date);
                    return [disabledDates.indexOf(string) == -1];
                }
            });

            // Time selection with 30-minute intervals
            var startTime = 9; // 9:00 AM
            var endTime = 18; // 6:00 PM
            var timeInterval = 30; // 30-minute intervals

            var timeSelect = $("#time");

            for (var hour = startTime; hour < endTime; hour++) {
                var minutes = 0;
                while (minutes < 60) {
                    var timeValue = (hour < 10 ? "0" : "") + hour + ":" + (minutes < 10 ? "0" : "") + minutes;
                    timeSelect.append(new Option(timeValue, timeValue));
                    minutes += timeInterval;
                }
            }
        });
    </script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <a href="../index.html" class="logo">
                <img src="../images/logo.png" alt="Lavinia Logo">
            </a>
            <ul class="nav-links">
                <li><a href="../index.html" class="btn">Ana Sayfa</a></li>
                <li><a href="../hizmetlerimiz.html" style="color: black;">Hizmetlerimiz</a></li>
                <li><a href="../hakkimizda.html" style="color: black;">Hakkımızda</a></li>
                <li><a href="../blog.html" style="color: black;">Blog</a></li>
                <li><a href="../iletisim.html" style="color: black;">İletişim</a></li>
                <li><a href="../logandreg/login.html" class="btn">Giriş Yap</a></li>
                <li><a href="../logandreg/register.html" class="btn">Kayıt Ol</a></li>
            </ul>
        </div>
    </header>

    <!-- Appointment Section -->
    <section class="appointment-section">
        <div class="container">
            <h2>Randevu Al</h2>
            @if (Model == null || !Model.Any())
            {
                <p>Uygun randevu bulunamadı.</p>
            }
            else
            {
                <form asp-action="Create" method="post" class="appointment-form">
                    <div class="input-group">
                        <label for="name">İsim Soyisim</label>
                        <input type="text" id="name" name="Name" required>
                    </div>
                    <div class="input-group">
                        <label for="phone">Telefon Numarası</label>
                        <input type="tel" id="phone" name="Phone" required>
                    </div>
                    <div class="input-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="Email" required>
                    </div>
                    <div class="input-group">
                        <label for="service">Hizmet Seçimi</label>
                        <select id="service" name="ServiceId" required>
                            <!-- Hizmetler burada listelenecek -->
                            <option value="#">#</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="datepicker">Randevu Tarihi</label>
                        <input type="text" id="datepicker" name="AppointmentDate" required>
                    </div>

                    <div class="input-group">
                        <label for="time">Randevu Saati</label>
                        <select id="time" name="Time" required>
                            <!-- Saatler burada JavaScript ile otomatik olarak doldurulacak -->
                        </select>
                    </div>

                    <button type="submit" class="btn">Randevu Al</button>
                </form>
            }
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section logo-section">
                    <img src="../images/logo.png" alt="Lavinia Logo">
                    <p>Lavinia Egzersiz ve Danışmanlık Merkezi</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-section contact-section">
                    <h3>İletişim Bilgileri</h3>
                    <p><i class="fas fa-map-marker-alt"></i> Adres: Orta, İnönü Cd. No:61, 61300 Akçaabat/Trabzon</p>
                    <p><i class="fas fa-envelope"></i> Email: info@lavinia.com</p>
                    <p><i class="fas fa-phone-alt"></i> Telefon: 0561 661 61 61</p>
                    <a href="../appointment/appointment.html" class="btn">RANDEVU AL</a>
                </div>
                <div class="footer-section services-section">
                    <h3>Hizmetlerimiz</h3>
                    <p>Reformer Pilates</p>
                    <p>Hamile Pilates</p>
                    <p>Yoga Terapi</p>
                    <p>Manuel Terapi</p>
                    <p>Pelvik Taban Rehabilitasyonu</p>
                    <p>3 Boyutlu Skolyoz Egzersizleri</p>
                    <p>Kanser Sonrası Egzersiz Danışmanlığı</p>
                    <p>Dans ve Zumba</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© Copyright 2020 - 2024 | Lavinia Egzersiz ve Danışmanlık Merkezi | Tüm hakları saklıdır | Design SelmanKara</p>
            </div>
        </div>
    </footer>
</body>
</html>
